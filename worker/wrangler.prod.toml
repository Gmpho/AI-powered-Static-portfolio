name = "ai-powered-static-portfolio-worker"
main = "dist/index.js"
compatibility_date = "2025-09-15"

# Build step: compile TS -> worker/dist as ES modules for Wrangler
[build]
command = "npm --prefix worker run build"

kv_namespaces = [
  { binding = "RATE_LIMIT_KV", id = "$RATE_LIMIT_KV_ID" },
  { binding = "PROJECT_EMBEDDINGS_KV", id = "$PROJECT_EMBEDDINGS_KV_ID" }
]

[env.production]
# production specific overrides (if needed)

[env.production.vars]
RATE_LIMIT_KV_ID = "${RATE_LIMIT_KV_ID}"
PROJECT_EMBEDDINGS_KV_ID = "${PROJECT_EMBEDDINGS_KV_ID}"
